import osmnx as ox
import osm_to_cleaned as otc
import copy

route = [
    982973953,
    982974153,
    382755762,
    582554395,
    454971842,
    454971838,
    35488633,
    763175279,
    987295542,
    1006232560,
    987295589,
    6598021323,
    987295596,
    1595979946,
    8185942037,
    4410573481,
    11304917928,
    11251422270,
    11251422274,
    178988890,
    1837791088,
    379551543,
    6597960100,
    582733085,
    34196342,
    6869489686,
    7414348122,
    365524,
    11251422281,
    178989167,
    339468313,
    990837636,
    438015866,
    1839962174,
    365526,
    935460772,
    365527,
    988617150,
    5803946991,
    988617124,
    988617269,
    988617245,
    988617318,
    1005789608,
    11251439873,
    11251439874,
    11251439869,
    1839625882,
    16479916,
    6134896664,
    6134658610,
    999262521,
    878473335,
    16479859,
    2374931903,
    21490326,
    2043411418,
    1595216916,
    1595216913,
    1595216908,
    365486,
    30358916,
    265441,
    2929885145,
    188472727,
    188475884,
    1099560796,
    27457786,
    1099538478,
    281767,
    281784,
    282247,
    281812,
    25335917,
    564059,
    128971,
    129002,
    1380719681,
    440566,
    1029625165,
    361899,
    1581188897,
    1029615020,
    3330053221,
    1029623888,
    1183591959,
    21606694,
    1045507252,
    1045507367,
    310653511,
    2848265597,
    3713821590,
    26956162,
    3713821589,
    8684499701,
    260739747,
    309398509,
    309398605,
    309398592,
    2821204385,
    309398597,
    309398587,
    2821204388,
    309398583,
    309398579,
    309398601,
    309398596,
    309419948,
    29931073,
    309419940,
    315526409,
    309419938,
    309419953,
    29931046,
    2821204851,
    315526438,
    309419934,
    315526436,
]

graph = otc.osm_to_cleaned()
route_graph = copy.deepcopy(graph)

for node, data in copy.deepcopy(route_graph.nodes(data=True)):
    if not node in route:
        route_graph.remove_node(node)

map_path = "./src/main/resources/route.html"
gdf = ox.graph_to_gdfs(route_graph, nodes=False)
gdf.explore().save(map_path)

ox.plot.plot_graph_route(graph, route)
